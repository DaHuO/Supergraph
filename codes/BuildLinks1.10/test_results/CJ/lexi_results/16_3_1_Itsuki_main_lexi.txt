def solve n parties heap = result = count = 0 for i num in enumerate parties heappush heap 1000 - num chr ord a + i while len heap > 0 item = heappop heap result += item 1 count += 1 if item 0 < 999 newitem = item 0 + 1 item 1 heappush heap newitem if count % 2 == 0 and len heap > 0 count = 0 result +=  continue rest = 0 for item in heap rest += 1000 - item 0 if rest > 2 break if rest == 2 count = 0 result +=  return result 		8 33
