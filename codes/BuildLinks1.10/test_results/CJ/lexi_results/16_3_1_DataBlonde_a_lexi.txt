def getmaxparty parties partiesorder if partiesorder == partiesorder = - v k for k v in parties iteritems heapq heapify partiesorder num p = heapq heappop partiesorder if len partiesorder == 2 and num <= - 2 num1 p1 = heapq heappop partiesorder others = partiesorder 0 0 + num + 2 heapq heappush partiesorder num1 p1 if num1 < others heapq heappush partiesorder num + 1 p return p 1 if num < - 2 heapq heappush partiesorder num + 2 p return p 2 if num == - 2 return p 2 return p 1 		21 38
def main argv ifile ofile = getfile argv numcases = int ifile readline strip for i in range 1 numcases + 1 ifile readline numbers = int el for el in ifile readline strip split ofile write case #{0}: format i + getresult numbers + \n ifile close ofile close 		59 67
def getfile argv if len argv < 2 raise valueerror if argv 1 == t return open test.txt r open testres.txt w if argv 1 == s return open a-small-attempt1.in r open smallres.txt w else return open a-large.in r open largeres.txt w 		11 19
def getresult numbers parties = chr ord a + i number for i number in enumerate numbers partiesorder = res = while len parties keys > 2 p num = getmaxparty parties partiesorder parties p -= num res append join p for i in range num if parties p == 0 del parties p count = parties values 0 for i in range count res append join parties keys return  join res 		41 55
