def main infile out for line in read_input infile out s = list line counts = digits = 0 zero 1 one 2 two 3 three 4 four 5 five 6 six 7 seven 8 eight 9 nine for char in s if counts get char counts char += 1 else counts char = 1 counts_orig = counts copy tries = 0 while len counts > 0 counts = counts_orig copy number = digit_order = sorted digits for digit in digit_order digit_counts = for char in digits digit if digit_counts get char digit_counts char += 1 else digit_counts char = 1 while all counts get c 0 >= digit_counts c for c in digits digit if tries > 0 and random random > 0.5 break number append digit for c in digits digit counts c -= 1 if counts c == 0 del counts c tries += 1 print counts out write join number + \n 		6 51
def read_input infile out with open infile r as f num_cases = int f readline for case in range 1 num_cases + 1 out write case #{}: format case yield f readline rstrip 		54 59
