def getelementstocheck lengthoriginalsequence level elementstocheck pointstocheck = curpoint = for i in range lengthoriginalsequence curpoint append i if len curpoint == level pointstocheck append curpoint curpoint = if curpoint != pointstocheck append curpoint if len pointstocheck > elementstocheck return impossible return  join str pointtonumber point lengthoriginalsequence for point in pointstocheck 		15 28
def pointtonumber point lengthoriginalsequence res = 0 for el in point - 1 res = res * lengthoriginalsequence + el return res + 1 		9 13
def main numcases = int stdin readline strip for i in range 1 numcases + 1 lengthoriginalsequence level elementstocheck = int s for s in stdin readline strip split print case #{0}: format i + getelementstocheck lengthoriginalsequence level elementstocheck 		30 34
