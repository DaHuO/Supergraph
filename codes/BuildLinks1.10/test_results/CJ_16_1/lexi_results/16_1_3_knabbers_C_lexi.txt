def solve to scores = used = circles = for i in to dones = set xs = j = i while not j in dones xs append j dones add j j = to j if j == xs - 2 scores i = len xs - 1 circles i = false used i = set xs - 1 elif j == i scores i = len xs circles i = true used i = set xs else scores i = 0 circles i = false used i = set bestcircle = - 1 score = 0 comp = set for scr i in reversed sorted scr i for i scr in scores items if circles i == false if len comp intersection used i == 0 comp |= used i score += scr else bestcircle = max bestcircle scr return max bestcircle score 		3 45
