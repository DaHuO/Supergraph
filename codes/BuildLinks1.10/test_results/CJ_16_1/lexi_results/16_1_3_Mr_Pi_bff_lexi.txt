def get_answer f n = int f readline strip f = x - 1 for x in map int f readline strip split recip_set = dict self_link = 0 into_account = set for i in xrange n if f f i == i recip_set i = 0 recip_set f i = 0 into_account add i into_account add f i continue for i in xrange n if i in into_account continue if recip_set has_key i continue single_len = 1 k = f i qset = counter qset i += 1 into_account add i while not recip_set has_key k and qset k < 2 into_account add k qset k += 1 k = f k single_len += 1 if recip_set has_key k recip_set k = max recip_set k single_len else cyclelen = sum 1 for x in qset values if x == 2 self_link = max self_link cyclelen with_recip = len recip_set + sum recip_set values if with_recip > self_link return with_recip else return self_link 		8 53
