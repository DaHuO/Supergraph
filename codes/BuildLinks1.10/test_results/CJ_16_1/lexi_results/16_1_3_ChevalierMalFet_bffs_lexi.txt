def findbestcircle bffs maxcirclelen = 0 stablechains = for i in range len bffs tagged = 0 * len bffs tagged i = 1 circle = i while tagged bffs circle - 1 == 0 and len circle < 1500 circle += bffs circle - 1 tagged circle - 1 = 1 if circle - 2 == bffs circle - 1 tup = tuple circle - 2 if tup in stablechains if len stablechains tup < len circle stablechains tup = circle else stablechains tup = circle else start = circle index bffs circle - 1 circlelen = len circle start if circlelen > maxcirclelen maxcirclelen = circlelen beststable = 0 for pair in stablechains if len stablechains pair == 0 continue if pair 1 pair 0 in stablechains lenmirrorchain = len stablechains pair + len stablechains pair 1 pair 0 - 2 beststable += lenmirrorchain stablechains pair 1 pair 0 = else beststable += len stablechains pair return max maxcirclelen beststable 		4 41
