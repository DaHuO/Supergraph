def solve kids longestcycle = 0 incycle = pairs = chains = for i in range len kids thiscycle = thiscycle append i currid = kids i while currid not in thiscycle thiscycle append currid currid = kids currid length = len thiscycle - thiscycle index currid if length == 2 p1 = thiscycle - 2 p2 = thiscycle - 1 p1 p2 = min p1 p2 max p1 p2 if p1 p2 not in pairs pairs append p1 p2 if len thiscycle > 2 chains append thiscycle - 2 len thiscycle - 2 longestcycle = max longestcycle length frompairs = for p in pairs leftid = p 0 rightid = p 1 left = 0 right = 0 for c in chains if c 0 == leftid left = max left c 1 elif c 0 == rightid right = max right c 1 frompairs append left + right + 2 return max longestcycle sum frompairs 		4 69
