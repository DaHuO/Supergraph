def solve pairs word_counts1 = dict word_counts2 = dict for i j in pairs if i not in word_counts1 word_counts1 i = 0 if j not in word_counts2 word_counts2 j = 0 word_counts1 i += 1 word_counts2 j += 1 return solve_helper pairs word_counts1 word_counts2 		4 14
def solve_helper pairs word_counts1 word_counts2 mem_key = tuple pairs frozenset word_counts1 items frozenset word_counts2 items if mem_key in memoized return memoized mem_key if len pairs == 0 return 0 num_faked = 0 for n i j in enumerate pairs if word_counts1 i == 1 or word_counts2 j == 1 continue word_counts1 i -= 1 word_counts2 j -= 1 test1 = solve_helper pairs n + 1 word_counts1 word_counts2 + 1 word_counts1 i += 1 word_counts2 j += 1 test2 = solve_helper pairs n + 1 word_counts1 word_counts2 ans = max test1 test2 memoized mem_key = ans return ans return 0 		18 41
