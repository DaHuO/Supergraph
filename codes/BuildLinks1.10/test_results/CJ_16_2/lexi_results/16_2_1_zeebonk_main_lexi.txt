def main stream = fileinput input next stream for case line in enumerate stream number = letter_counts = Counter line strip ok = True while ok ok = False for key chars digit in level_1 iteritems if letter_counts key > 0 ok = True number append digit letter_counts subtract chars ok = True while ok ok = False for key chars digit in level_2 iteritems if letter_counts key > 0 ok = True number append digit letter_counts subtract chars ok = True while ok ok = False for key chars digit in level_3 iteritems if letter_counts key > 0 ok = True number append digit letter_counts subtract chars ok = True while ok ok = False for key chars digit in level_4 iteritems if letter_counts key > 0 ok = True number append digit letter_counts subtract chars print Case #%d: %s % case + 1 join map str sorted number 		28 71
