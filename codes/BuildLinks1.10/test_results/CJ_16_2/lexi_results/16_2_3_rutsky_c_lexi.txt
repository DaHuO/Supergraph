def solve N themes assert N == len themes w1_to_idx = w2_to_idx = themes_indexed = for w1 w2 in themes if w1 not in w1_to_idx idx = len w1_to_idx w1_to_idx w1 = idx i1 = w1_to_idx w1 if w2 not in w2_to_idx idx = len w2_to_idx w2_to_idx w2 = idx i2 = w2_to_idx w2 themes_indexed append i1 i2 min_size = N * 2 for subset_idx in range 2 ** N got_w1 = False * len w1_to_idx got_w2 = False * len w2_to_idx size = 0 for i get in enumerate {:0 + str N + b} format subset_idx if get == 1 size += 1 got_w1 themes_indexed i 0 = True got_w2 themes_indexed i 1 = True if all got_w1 and all got_w2 and size < min_size min_size = size assert min_size <= N return N - min_size 		12 49
