def sift lst pshift head while pshift > 1 rt = head - 1 lf = head - 1 - LP pshift - 2 if lst head >= lst lf and lst head >= lst rt break if lst lf >= lst rt lst head lst lf = lst lf lst head head = lf pshift -= 1 else lst head lst rt = lst rt lst head head = rt pshift -= 2 lst log 		22 36
def smoothsort lst p = 1 pshift = 1 head = 0 while head < len lst - 1 if p & 3 == 3 sift lst pshift head p >>= 2 pshift += 2 else if LP pshift - 1 >= len lst - 1 - head trinkle lst p pshift head False else sift lst pshift head if pshift == 1 p <<= 1 pshift -= 1 else p <<= pshift - 1 pshift = 1 p |= 1 head += 1 trinkle lst p pshift head False while pshift != 1 or p != 1 if pshift <= 1 trail = trailingzeroes p & ~ 1 p >>= trail pshift += trail else p <<= 2 p ^= 7 pshift -= 2 trinkle lst p >> 1 pshift + 1 head - LP pshift - 1 True trinkle lst p pshift head - 1 True head -= 1 		61 98
def trailingzeroes v return MultiplyDeBruijnBitPosition v & - v * 0x077CB531L >> 27 & 0b11111 		18 19
def trinkle lst p pshift head trusty while p != 1 stepson = head - LP pshift if lst stepson <= lst head break if not trusty and pshift > 1 rt = head - 1 lf = head - 1 - LP pshift - 2 if lst rt >= lst stepson or lst lf >= lst stepson break lst head lst stepson = lst stepson lst head lst log head = stepson trail = trailingzeroes p & ~ 1 p >>= trail pshift += trail trusty = False if not trusty sift lst pshift head 		39 58
