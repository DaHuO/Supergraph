def convert s if s == pr or s == rp return p elif s == ps or s == sp return s elif s == rs or s == sr return r else print error s return p 		4 13
def replace s lis news = subst = lis 0 2 lis 1 lis 0 + lis 2 for j in range len s if s j == p if pr in subst news += pr else news += rp elif s j == s if ps in subst news += ps else news += sp else if rs in subst news += rs else news += sr return news 		44 63
def solve n r p s = int e for e in input split up = math ceil 2 ** n / 3 low = math floor 2 ** n / 3 if r < low or r > up return impossible if p < low or p > up return impossible if s < low or s > up return impossible nup = nlow = if p == up nup append p else nlow append p if r == up nup append r else nlow append r if s == up nup append s else nlow append s return order nup nlow n prs 		67 94
def order up low n lis if n == 0 return up 0 nup = nlow = if len up == 1 if p == up 0 nup = p s nlow = r if r == up 0 nup = r p nlow = s if s == up 0 nup = r s nlow = p elif len low == 1 if p == low 0 nlow = p s nup = r if r == low 0 nlow = r p nup = s if s == low 0 nlow = r s nup = p strin = order nup nlow n - 1 join convert e for e in lis 0 2 lis 0 + lis 2 lis 1 return replace strin lis 		15 42
