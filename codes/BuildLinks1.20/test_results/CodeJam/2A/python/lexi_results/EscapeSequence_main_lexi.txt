def solve n r p s if r == s if n % 2 == 1 if p != r - 1 return impossible if n % 2 == 0 if p != r + 1 return impossible tmp = 2 elif s == p if n % 2 == 1 if r != s - 1 return impossible if n % 2 == 0 if r != s + 1 return impossible tmp = 0 elif p == r if n % 2 == 1 if s != p - 1 return impossible if n % 2 == 0 if s != p + 1 return impossible tmp = 1 else return impossible winners = r s p winner = winners tmp + n % 3 return maketree winner n 		9 40
def maketree x n if n == 0 return x if x == p a b = maketree p n - 1 maketree r n - 1 if x == r a b = maketree r n - 1 maketree s n - 1 if x == s a b = maketree p n - 1 maketree s n - 1 if a < b return a + b else return b + a 		1 7
