def solve n r p s a = max r p s b = min r p s if a - b > 1 return impossible clist = if r == a clist += r if p == a clist += p if s == a clist += s for c in r p s if not c in clist clist += c pass nval = 2 ** n ret = clist 0 + clist 1 + clist 2 * nval / 3 if nval % 3 == 1 ret += clist 0 if nval % 3 == 2 ret += clist 0 + clist 1 for n in range n pos = 0 ret2 = while pos < 2 ** n s1 = ret pos pos + 2 ** n s2 = ret pos + 2 ** n pos + 2 ** n * 2 if s1 < s2 ret2 += s1 + s2 else ret2 += s2 + s1 pos += 2 ** n * 2 pass ret = ret2 return ret 		6 32
