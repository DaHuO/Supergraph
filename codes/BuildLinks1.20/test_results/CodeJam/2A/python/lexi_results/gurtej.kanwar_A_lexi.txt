def maketree top n if n == 0 return top else if top == p other = r elif top == r other = s elif top == s other = p else assert false one = maketree top n - 1 two = maketree other n - 1 if one < two return one + two else return two + one 		41 58
def propcounts counts n newcounts = tot = 0 for i in range n - 1 - 1 if i in counts tot += counts i if tot > 0 and i > 0 newcounts i - 1 = tot return newcounts 		5 13
def getcounts n if n in memo return memo n cs = 0 0 0 css = cur = 0 counts = for i in range n + 1 assert i <= n counts i = 1 while counts cs cur % 3 += counts 0 cur += 1 css append counts 0 counts = propcounts counts n assert len css == n + 1 assert len cs == 3 memo n = tuple cs return memo n 		17 39
